(function(){var a,b,c,d=Array.prototype.slice;try{c=require("underscore")}catch(e){}a=function(){function a(a,b){this.fn=a,this.args=b}return a.prototype.call=function(){return this.fn.apply(null,this.args)},a}(),b=function(b){var c;c=b.fn,c.recursing=!0;while(b instanceof a)b=b.call();return c.recursing=!1,b},c.mixin({loop:function(a,b,d){var e,f;switch(arguments.length){case 2:e=[b,a,{}],d=e[0],b=e[1],a=e[2];break;case 1:f=[a,[],{}],d=f[0],b=f[1],a=f[2]}return a.loop=c(c.recurse).bind(null,c(d).bind(a)),a.loop.apply(a,b)},recurse:function(){var c;return c=function(){var c,e,f;return e=arguments[0],c=2<=arguments.length?d.call(arguments,1):[],f=new a(e,c),e.recursing?f:b(f)},c.force=function(a){return a.recursing=!1,c.apply(null,arguments)},c}()})}).call(this)